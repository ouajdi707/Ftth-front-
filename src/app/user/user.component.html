<p-toolbar styleClass="p-mb-4">
  <ng-template pTemplate="left">
    <button pButton pRipple label="Nouveau Utilisateur" icon="pi pi-plus" class="p-button-success p-mr-2"
            (click)="openNew()"></button>
    <p-dialog [(visible)]="NewDialog" [style]="{width: '580px', height:530}" header="Ajout Utilisateur" [modal]="true"
              styleClass="p-fluid">
      <ng-template pTemplate="content">
        <form>
          <div class="form-group">
            <label>Username</label>
            <input class="form-control text-black" id="username" type="text" [(ngModel)]="users.username"
                   name="firstname">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input class="form-control text-black" id="username1050" type="text" [(ngModel)]="users.email"
                   name="firstname">
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input
              [formControl]="password"
              type="password"
              class="form-control"
              id="password"
              [(ngModel)]="users.password"
            >

            <span *ngIf="password.invalid && password.dirty" class="text-warning "
                  style="font-size: 12px">{{geterrorPassword()}}</span>
          </div>


          <div class="row pt-2">
            <p-button label="Ajouter" (click)="Onadd(users)"></p-button>
          </div>
        </form>
      </ng-template>
    </p-dialog>
  </ng-template>
</p-toolbar>

<p-table [value]="user" responsiveLayout="scroll">
  <ng-template pTemplate="caption">
    <div class="datatable-header">
      List utilisateurs
    </div>
  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th> Username</th>
      <th> Action</th>


    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr>
      <td>{{user.username}}</td>


      <td>
        <button type="button" class="btn btn-outline-primary" (click)="dialogopen(user)">Details</button>
        &nbsp;&nbsp;
        <p-dialog [(visible)]="userDialog" [style]="{width: '450px'}" header="User Details" [modal]="true"
                  styleClass="p-fluid">
          <ng-template pTemplate="content">
            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block">Username :</label>
              </div>
              <div class="col-6">
                {{users.username}}
              </div>
            </div>

            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block"> Email :</label>
              </div>
              <div class="col-6">
                {{users.email}}
              </div>
            </div>
            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block"> Status :</label>
              </div>
              <div class="col-6">
                {{users.active}}
              </div>
            </div>
          </ng-template>
        </p-dialog>
        <button type="button" class="btn btn-outline-warning">Affecter Role</button>

        &nbsp;&nbsp;

        <button type="button" class="btn btn-outline-info" (click)="openDialog(user)">Modifier</button>
        <p-dialog [(visible)]="productDialog" [style]="{width: '450px'}" header="User Details" [modal]="true"
                  styleClass="p-fluid">
          <ng-template pTemplate="content">
            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block">Username</label>
              </div>
              <div class="col-6">
                <input class="form-control text-black" id="username19" type="text" aria-describedby="username1-help"
                       pInputText [(ngModel)]="users.username"/>
              </div>
            </div>
            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block">Password </label>
              </div>
              <div class="col-6">
                <input class="form-control text-black" id="usernam888" type="password" aria-describedby="username1-help"
                       pInputText [(ngModel)]="users.password"/>
              </div>
            </div>
            <div class="row pt-2">
              <div class="col-6">
                <label for="username1" class="block"> Email</label>
              </div>
              <div class="col-6">
                <input class="form-control text-black" id="username18" type="text" aria-describedby="username1-help"
                       pInputText [(ngModel)]="users.email"/>
              </div>
            </div>
            <div class="row pt-2">
              <p-button label="modifier" (click)="edituser(users)"></p-button>
            </div>
          </ng-template>
        </p-dialog>
        &nbsp;&nbsp;
        <button type="button" class=" btn btn-outline-success" *ngIf="!user.active" (click)="activer(user)">Activer
        </button>
        <button type="button" class=" btn btn-outline-info" *ngIf="user.active" (click)="activer(user)">Desactiver
        </button>
        &nbsp;&nbsp;


        <button type="button" class="btn btn-outline-danger" (click)="Ondeleteuser(user.id)">Supprimer</button>
        &nbsp;&nbsp;


      </td>


    </tr>
  </ng-template>
</p-table>
